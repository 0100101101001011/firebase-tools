#!/usr/bin/env node

var updateNotifier = require('update-notifier');
var pkg = require('../package.json');
var client = require('..');
var FirebaseError = require('../lib/error');
var errorOut = require('../lib/errorOut');

updateNotifier({pkg: pkg}).notify();

try {
  client.cli.parse(process.argv);
} catch (e) {
  var err = e;
  if (err.name !== 'FirebaseError') {
    err = new FirebaseError("An unexpected error has occurred. Please contact support", {
      status: 500,
      original: e
    });
  }
  errorOut(client, err);
}

if (!process.argv.slice(2).length) {
  client.cli.help();
}
